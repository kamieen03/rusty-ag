(this.webpackJsonpart_gallery=this.webpackJsonpart_gallery||[]).push([[0],{35:function(e,t,a){e.exports=a(59)},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(18),s=a.n(i),c=(a(40),a(3)),l=a(4),o=a(10),u=a(6),h=a(5),d=(a(41),a(42),a(17)),p=a(72);function m(e){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header-logo"},"Artsee"),r.a.createElement(p.a,{onClick:function(){e.onStartSearching()}},r.a.createElement(d.d,{className:"header-search"})))}a(46);var f=a(8),v=a.n(f),E=a(16),g=(a(48),a(49),a(19));function k(e){return r.a.createElement("ul",null," ",void 0!==e.data?e.data.slice(0,8).map((function(t){return r.a.createElement("li",{className:"LinkList-item"},r.a.createElement(g.b,{to:e.url+"/"+t[e.idFieldName],onClick:function(){return e.onLinkClick()}},t[e.valueFieldName]))})):null)}var b="https://rustyag.herokuapp.com/api",y="".concat(b,"/search/"),S="".concat(b,"/artist/"),j="".concat(b,"/paintings/"),O=("".concat(b,"/art_movement/"),function(e){return"".concat(b,"/artist/").concat(e,"/paintings/")}),L="".concat(b,"/popular/"),N=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={results:{}},n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.searchPhrase!==e.searchPhrase){if(""===this.props.searchPhrase)return;this.fetchSearchResults(this.props.searchPhrase).then((function(e){null!=e&&t.setState({results:e})}))}}},{key:"fetchSearchResults",value:function(){var e=Object(E.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=fetch("".concat(y).concat(t)),t!==this.props.searchPhrase){e.next=5;break}return e.next=4,a;case 4:return e.abrupt("return",e.sent.json());case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return""===this.props.searchPhrase?null:r.a.createElement("div",{className:"SearchResults"},r.a.createElement("div",{className:"SearchResults-list"},r.a.createElement("h1",null,"Artists"),r.a.createElement(k,{onLinkClick:this.props.onLinkClick,data:this.state.results.artists,idFieldName:"url",valueFieldName:"name",url:"/artist"})),r.a.createElement("div",{className:"SearchResults-list"},r.a.createElement("h1",null,"Paintings"),r.a.createElement(k,{onLinkClick:this.props.onLinkClick,data:this.state.results.artworks,idFieldName:"id",valueFieldName:"name",url:"/paintings"})),r.a.createElement("div",{className:"SearchResults-list"},r.a.createElement("h1",null,"Styles"),r.a.createElement(k,{onLinkClick:this.props.onLinkClick,data:this.state.results.styles,idFieldName:"url",valueFieldName:"title",url:"/art_movement"})))}}]),a}(n.Component),w=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={phrase:""},n.handleSearchPhraseChange=n.handleSearchPhraseChange.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"handleSearchPhraseChange",value:function(e){this.setState({phrase:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",{className:"Searcher"},r.a.createElement("div",{className:"SearcherInsides"},r.a.createElement(p.a,{onClick:this.props.onStopSearching,className:"Searcher-close"},r.a.createElement(d.a,{className:"Searcher-close-icon"})),r.a.createElement("input",{className:"Searcher-searchbar",type:"search",placeholder:"Search",onChange:this.handleSearchPhraseChange}),r.a.createElement(N,{searchPhrase:this.state.phrase,onLinkClick:this.props.onStopSearching})))}}]),a}(r.a.Component);a(52);function C(){return r.a.createElement("div",{className:"CubeSpinner"},r.a.createElement("div",{className:"CubeSpinner-cube1"}),r.a.createElement("div",{className:"CubeSpinner-cube2"}))}a(53);var A=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isLoaded:!1,data:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.updateArtist()}},{key:"componentDidUpdate",value:function(e){this.props.id!==e.id&&(this.props.onEntityUpdate(),this.setState({isLoaded:!1,data:null}),this.updateArtist())}},{key:"updateArtist",value:function(){var e=Object(E.a)(v.a.mark((function e(){var t,a,n=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchEntityData();case 2:t=e.sent,(a=new Image).onload=function(){n.setState({isLoaded:!0,data:t}),n.props.onEntityLoad()},a.src=t[this.props.imgField];case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchEntityData",value:function(){var e=Object(E.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.props.url).concat(this.props.id));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"generateDescription",value:function(){var e=this;return this.props.fields.filter((function(t){return null!=e.state.data[t[0]]})).map((function(t){return r.a.createElement("div",{className:"Entity-description-item"},r.a.createElement("div",{className:"Entity-description-item-property"},t[1]+":"),r.a.createElement("div",{className:"Entity-description-item-value"},e.state.data[t[0]]))}))}},{key:"render",value:function(){return this.state.isLoaded?r.a.createElement("div",{className:"Entity"},r.a.createElement("div",{className:"Entity-description"},r.a.createElement("h1",{className:"Entity-description-title"},this.state.data[this.props.title]),this.generateDescription()),r.a.createElement("img",{className:"Entity-image",src:this.state.data[this.props.imgField],alt:""})):r.a.createElement("div",null,r.a.createElement(C,null))}}]),a}(n.Component),x=(a(54),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isEntityLoaded:!1},n.handleArtistLoad=n.handleArtistLoad.bind(Object(o.a)(n)),n.handleArtistUpdate=n.handleArtistUpdate.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"handleArtistLoad",value:function(){this.setState({isEntityLoaded:!0})}},{key:"handleArtistUpdate",value:function(){this.setState({isEntityLoaded:!1})}},{key:"render",value:function(){var e=this.props.match.params.artistId;return r.a.createElement("div",{className:"Artist"},r.a.createElement(A,{id:e,url:S,title:"name",fields:[["birth","Born"],["death","Died"]],imgField:"image_url",onEntityLoad:this.handleArtistLoad,onEntityUpdate:this.handleArtistUpdate}),this.state.isEntityLoaded?r.a.createElement(g.b,{className:"Artist-artworks",to:"/artist/".concat(e,"/paintings/")},"See artworks"):null)}}]),a}(n.Component)),P=(a(55),a(33)),_=(a(56),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={pageIndex:1},n}return Object(l.a)(a,[{key:"render",value:function(){this.state.pageIndex,this.pageSize,this.state.pageIndex,this.pageSize;return r.a.createElement("div",null,this.props.images.slice(0,20).map((function(e){return r.a.createElement(P.LazyLoadImage,{src:e.image,className:""})})))}}]),a}(n.Component)),I=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isLoaded:!1,paintings:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.fetchPaintings().then((function(t){return e.setState({isLoaded:!0,paintings:t})}))}},{key:"fetchPaintings",value:function(){var e=Object(E.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.artistId,e.next=3,fetch("".concat(O(t)));case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleLoaded",value:function(){}},{key:"handleStartLoading",value:function(){this.setState({isLoaded:!1})}},{key:"render",value:function(){return this.state.isLoaded?r.a.createElement("div",null,r.a.createElement(_,{images:this.state.paintings,pageSize:10})):r.a.createElement("div",null,r.a.createElement(C,null))}}]),a}(n.Component),U=(a(57),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isEntityLoaded:!1},n.handleArtworkLoad=n.handleArtworkLoad.bind(Object(o.a)(n)),n.handleArtworkUpdate=n.handleArtworkUpdate.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"handleArtworkLoad",value:function(){this.setState({isEntityLoaded:!0})}},{key:"handleArtworkUpdate",value:function(){this.setState({isEntityLoaded:!1})}},{key:"render",value:function(){var e;e="match"in this.props?this.props.match.params:this.props.artworkId;return r.a.createElement("div",{className:"Artwork"},r.a.createElement(A,{id:e,url:j,title:"title",fields:[["artist_name","Artist"],["completition_year","Completition year"],["location","Location"],["gallery","Gallery"],["size_x","Width"],["size_y","Height"]],imgField:"image",onEntityLoad:this.handleArtworkLoad,onEntityUpdate:this.handleArtworkUpdate}))}}]),a}(n.Component)),F=(a(58),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={auto_spin:!0,paintings_iter:0,paintings:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.fetchPopular().then((function(t){e.setState({paintings:t}),setInterval((function(){e.state.auto_spin&&e.scroll(1,!0)}),7e3)}))}},{key:"fetchPopular",value:function(){var e=Object(E.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=fetch("".concat(L)),e.next=3,t;case 3:return e.abrupt("return",e.sent.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"scroll",value:function(e,t){var a=this;this.setState({auto_spin:t,paintings_iter:function(){var t=(a.state.paintings_iter+e)%a.state.paintings.length;return t>=0?t:a.state.paintings.length-1}()})}},{key:"render",value:function(){var e=this;return null!=this.state.paintings?r.a.createElement("div",{className:"Carousel"},r.a.createElement(p.a,{onClick:function(){return e.scroll(-1,!1)}},r.a.createElement(d.b,null)),r.a.createElement(U,{artworkId:this.state.paintings[this.state.paintings_iter].id}),r.a.createElement(p.a,{onClick:function(){return e.scroll(1,!1)}},r.a.createElement(d.c,null))):r.a.createElement("div",{className:"Carousel"})}}]),a}(n.Component)),D=a(2),z=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isSearching:!1},n.handleStartSearching=n.handleStartSearching.bind(Object(o.a)(n)),n.handleStopSearching=n.handleStopSearching.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"handleStartSearching",value:function(){this.setState({isSearching:!0})}},{key:"handleStopSearching",value:function(){this.setState({isSearching:!1})}},{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(m,{onStartSearching:this.handleStartSearching})),r.a.createElement("main",{className:"App-main"},r.a.createElement(D.c,null,r.a.createElement(D.a,{path:"/artist/:artistId/paintings/",component:I}),r.a.createElement(D.a,{path:"/artist/:artistId/",component:x}),r.a.createElement(D.a,{path:"/paintings/:artworkId/",component:U}),r.a.createElement(D.a,{path:"/",component:F}))),this.state.isSearching?r.a.createElement("div",{className:"App-searcher"},r.a.createElement(w,{onStopSearching:this.handleStopSearching})):null))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.5117886b.chunk.js.map